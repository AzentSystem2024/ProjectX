<div id="parent" class="parentDiv">
  <div>
    <div class="button-container">
      <dx-button
        class="toggleButton"
        icon="{{ isContentVisible ? 'spinup' : 'spindown' }}"
        stylingMode="outlined"
        type="normal"
        [hint]="isContentVisible ? 'Hide Basic Info' : 'Show Basic Info'"
        [width]="200"
        [height]="15"
        (onClick)="toggleContent()"
      >
      </dx-button>
    </div>

    <div
      class="data-container"
      [ngClass]="{ 'hide-content': !isContentVisible }"
    >
      <div class="headingText">Basic info</div>
      <div class="d-flex align-items-center RowgroupDiv">
        <div class="BorderBox">
          <div class="mt-1">
            <div class="label-container">
              <label class="custom-label"
                >Facility <i class="icon-dataportability"></i
              ></label>
              <dx-text-box
                labelMode="static"
                [width]="'60%'"
                [(value)]="FacilityID"
              >
              </dx-text-box>
            </div>
          </div>

          <div class="mt-1">
            <div class="label-container">
              <label class="custom-label">Member ID</label>
              <dx-text-box
                [(value)]="MemberIDValue"
                labelMode="static"
                [width]="'60%'"
              >
              </dx-text-box>
            </div>
          </div>

          <div class="mt-1">
            <div class="label-container">
              <label class="custom-label">Receiver ID</label>
              <dx-text-box
                [(value)]="ReceiverIDValue"
                labelMode="static"
                [width]="'60%'"
              >
              </dx-text-box>
            </div>
          </div>

          <div class="mt-1">
            <div class="label-container">
              <label class="custom-label">Payer</label>
              <dx-text-box
                [(value)]="PayerIDValue"
                labelMode="static"
                [width]="'60%'"
              >
              </dx-text-box>
            </div>
          </div>
        </div>

        <div class="BorderBox">
          <div class="mt-1">
            <div class="label-container">
              <label class="custom-label">Claim Number</label>
              <dx-text-box
                labelMode="static"
                [width]="'60%'"
                [(value)]="ClaimNumberValue"
              >
              </dx-text-box>
            </div>
          </div>

          <div class="mt-1">
            <div class="label-container">
              <label class="custom-label">Claim Count</label>
              <dx-text-box
                [(value)]="ClaimCountValue"
                labelMode="static"
                [width]="'60%'"
              >
              </dx-text-box>
            </div>
          </div>
          <div class="mt-1">
            <div class="label-container">
              <label class="custom-label">Remittance Count</label>
              <dx-text-box
                [(value)]="RemittanceCountValue"
                labelMode="static"
                [width]="'60%'"
              >
              </dx-text-box>
            </div>
          </div>

          <div class="mt-1">
            <div class="label-container">
              <label class="custom-label">ID Payer</label>
              <dx-text-box
                [(value)]="IDPayerValue"
                labelMode="static"
                [width]="'60%'"
              >
              </dx-text-box>
            </div>
          </div>

          <div class="mt-1">
            <div class="label-container">
              <label class="custom-label">Emirates ID</label>
              <dx-text-box
                [(value)]="EmiratesIDvalue"
                labelMode="static"
                [width]="'60%'"
              >
              </dx-text-box>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="DetailsDrillDown RowgroupDiv2 mt-3">
    <div class="tabs-demo view-wrapper">
      <div class="widget-container">
        <!-- ------------------ Transaction DataGrid (Visible for Tab 0)---------------- -->
        <div class="gridDataDiv mt-1">
          <div class="headingText">Transaction Details</div>
          <dx-data-grid
            class="grid theme-dependent"
            noDataText="No Data Available"
            [height]="'25vh'"
            [dataSource]="TransactionDataSource"
            [allowColumnResizing]="true"
            [allowColumnReordering]="true"
            [hoverStateEnabled]="true"
            [columnAutoWidth]="true"
            [focusedRowEnabled]="true"
            [autoNavigateToFocusedRow]="false"
            [keyExpr]="'TransactionDate'"
            [(focusedRowKey)]="focusedRow"
            [headerFilter]="{ visible: true }"
            [columnFixing]="{
              enabled: true,
              texts: { fix: 'Freeze', unfix: 'Unfreeze' }
            }"
            (onFocusedRowChanged)="onTransactionGridFocusedRowChanged($event)"
          >
            <dxi-column
              *ngIf="!isEmptyDatagrid"
              type="buttons"
              [width]="40"
              [fixed]="true"
              fixedPosition="left"
              [allowFixing]="false"
              [allowHiding]="false"
              [allowResizing]="false"
              [allowReordering]="false"
            >
              <dxi-button
                icon="detailslayout"
                text="Details"
                hint="View Details"
                [onClick]="TransactionRowDrillDownClick"
              ></dxi-button>
            </dxi-column>
            <dxi-column
              *ngFor="let column of transactionColumns"
              [dataField]="column.Title"
              [caption]="column.ToolTip"
              [visible]="column.Visibility"
            ></dxi-column>
          </dx-data-grid>
        </div>

        <!-- -------------------Activity DataGrid (Visible for Tab 1)------------------- -->
        <div class="gridDataDiv mt-1" *ngIf="isActivityGridVisible">
          <div class="headingText">Submission Activities</div>
          <dx-data-grid
            class="grid theme-dependent"
            noDataText="No Data Available"
            [height]="'38vh'"
            [dataSource]="filteredActivityDataSource"
            [allowColumnResizing]="true"
            [allowColumnReordering]="true"
            [hoverStateEnabled]="true"
            [columnAutoWidth]="true"
            [focusedRowEnabled]="true"
            [autoNavigateToFocusedRow]="false"
            [keyExpr]="'ClaimActivityNumber'"
            [headerFilter]="{ visible: true }"
            [columnFixing]="{
              enabled: true,
              texts: { fix: 'Freeze', unfix: 'Unfreeze' }
            }"
            [(focusedRowKey)]="activityFocusRow"
            (onFocusedRowChanged)="onActivityGridFocusedRowChanged($event)"
          >
            <dxi-column
              *ngFor="let column of SubmisstionActivityColumns"
              [dataField]="column.Title"
              [caption]="column.ToolTip"
              [visible]="column.Visibility"
            ></dxi-column>
          </dx-data-grid>
        </div>

        <!-- ------------------Diagnosis DataGrid (Visible for Tab 2)------------------- -->
        <div class="gridDataDiv mt-1" *ngIf="isDiagnosisGridVisible">
          <div class="headingText">Details of Diagnosis</div>
          <dx-data-grid
            class="grid theme-dependent"
            noDataText="No Data Available"
            [height]="'30vh'"
            [dataSource]="filteredDiagnosisDataSource"
            [allowColumnResizing]="true"
            [allowColumnReordering]="true"
            [hoverStateEnabled]="true"
            [columnAutoWidth]="true"
            [headerFilter]="{ visible: true }"
            [columnFixing]="{
              enabled: true,
              texts: { fix: 'Freeze', unfix: 'Unfreeze' }
            }"
          >
            <dxi-column
              *ngFor="let column of DiagnosisColumns"
              [dataField]="column.Title"
              [caption]="column.ToolTip"
              [visible]="column.Visibility"
            ></dxi-column>
          </dx-data-grid>
        </div>
      </div>
    </div>
  </div>

  <dx-popup
    *ngIf="isSubmissionDrillOpened"
    [(visible)]="isSubmissionDrillOpened"
    title="Claim Details: 1st Submission"
    height="90vh"
    [width]="'80%'"
  >
    <app-inner-drill-down-submission
      [clickedRowData]="InnerClickedRowData"
      [FacilityID]="FacilityID"
    ></app-inner-drill-down-submission>
  </dx-popup>

  <dx-popup
    *ngIf="isResubmissionDrillOpened"
    [(visible)]="isResubmissionDrillOpened"
    title="Claim Details: Resubmission"
    height="90vh"
    [width]="'80%'"
  >
    <app-inner-drill-down-resubmission
      [clickedRowData]="InnerClickedRowData"
      [FacilityID]="FacilityID"
    ></app-inner-drill-down-resubmission>
  </dx-popup>

  <dx-popup
    *ngIf="isRemittanceDrillOpened"
    [(visible)]="isRemittanceDrillOpened"
    title="Claim Details: Remittance"
    height="90vh"
    [width]="'80%'"
  >
    <app-inner-drill-down-remittance
      [clickedRowData]="InnerClickedRowData"
      [FacilityID]="FacilityID"
    ></app-inner-drill-down-remittance>
  </dx-popup>
</div>
<dx-load-panel
  #loadPanel
  shadingColor="rgba(0,0,0,0.0)"
  [position]="{ of: '#parent' }"
  [(visible)]="loadingVisible"
  [showIndicator]="true"
  [showPane]="true"
  [shading]="true"
  [hideOnOutsideClick]="false"
  [message]="'Loading...'"
>
</dx-load-panel>
