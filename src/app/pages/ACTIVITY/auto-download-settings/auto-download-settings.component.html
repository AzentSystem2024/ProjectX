<div class="view-wrapper list-page">
  <!-- =================================ToolBar============================ -->

  <div class="toolbarDiv mb-2">
    <dx-toolbar>
      <dxi-item location="before" text="Download Settings"></dxi-item>
    </dx-toolbar>
  </div>
  <!-- =================================Content============================ -->
  <div class="contentBody">
    <div class="mainContent mb-1">
      <!-- ============================Form Data========================== -->
      <div id="form-container" class="ms-3 me-3">
        <div class="form-container">
          <div class="row mb-3">
            <!-- Database Name Field with Checkbox -->
            <div class="col-md-6">
              <dx-check-box
                class="mb-0"
                [(value)]="isDatabaseNameEditable"
                text="Enable External Database"
              ></dx-check-box>
              <dx-text-box
                class="mt-0"
                [(value)]="formModel.DatabaseName"
                [disabled]="!isDatabaseNameEditable"
                label="Database Name"
                labelMode="floating"
              ></dx-text-box>
            </div>

            <!-- XML Directory Field with Checkbox -->
            <div class="col-md-6">
              <dx-check-box
                class="mb-0"
                [(value)]="isXMLDirectoryEditable"
                text="Enable external XML Directory"
              ></dx-check-box>
              <dx-text-box
                class="mt-0"
                [(value)]="formModel.XMLDirectory"
                [disabled]="!isXMLDirectoryEditable"
                label="XML Directory"
                labelMode="floating"
              ></dx-text-box>
            </div>
          </div>

          <!-- Date Fields -->
          <div class="row mb-3">
            <div class="col-md-4">
              <dx-date-box
                class="me-0"
                [(value)]="formModel.ClaimTransactionStartDate"
                label="Claim Transaction Start Date"
                labelMode="floating"
              ></dx-date-box>
            </div>
            <div class="col-md-4">
              <dx-date-box
                class="me-0"
                [(value)]="formModel.RemittanceTransactionStartDate"
                label="Remittance Transaction Start Date"
                labelMode="floating"
              ></dx-date-box>
            </div>
            <div class="col-md-4">
              <dx-text-box
                class="ms-0"
                [(value)]="formModel.ServiceInterval"
                label="Service Interval"
                labelMode="floating"
              ></dx-text-box>
            </div>
          </div>
        </div>
      </div>
      <!-- =======================Instance Creation======================= -->
      <div class="facilityContainer">
        <div class="row justify-content-center align-items-center">
          <div class="col-12 d-flex mb-3">
            <div class="col-10 position-relative dropdownContent">
              <div
                *ngFor="let dropdown of dropdowns; let i = index"
                class="col-12 d-flex align-items-center mb-3"
              >
                <div class="col-10">
                  <dx-tag-box
                    labelMode="floating"
                    labelLocation="left"
                    label="Instance #{{ i + 1 }}"
                    [(value)]="dropdown.selectedValues"
                    [dataSource]="dataSource"
                    valueExpr="ID"
                    displayExpr="FacilityName"
                    [showSelectionControls]="true"
                    [showClearButton]="true"
                    [multiline]="true"
                    [searchEnabled]="true"
                    [maxDisplayedTags]="5"
                    (onValueChanged)="onTagBoxValueChanged($event, i)"
                  >
                  </dx-tag-box>
                </div>
                <div class="col-2 ms-2 mt-2">
                  <dx-button
                    text=""
                    (onClick)="removeDropdown(i)"
                    type="danger"
                    icon="close"
                    stylingMode="outlined"
                  >
                  </dx-button>
                </div>
              </div>
            </div>
            <div class="col-2 mt-2">
              <dx-button
                text="Add Instance"
                (onClick)="addDropdown()"
                type="default"
                icon="plus"
                stylingMode="contained"
              >
              </dx-button>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- Footer Section -->
    <div class="footerDiv">
      <dx-toolbar class="pe-4">
        <dxi-item
          location="after"
          widget="dxButton"
          [options]="{
            text: 'Clear',
            stylingMode: 'contained',
            type: 'normal',
            onClick: onClearClick
          }"
        ></dxi-item>
        <dxi-item
          location="after"
          widget="dxButton"
          [options]="{
            text: 'Save',
            stylingMode: 'contained',
            type: 'default',
            onClick: onAddClick
          }"
        ></dxi-item>
      </dx-toolbar>
    </div>
  </div>
</div>
